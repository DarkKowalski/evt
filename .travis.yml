---
language: ruby
cache: bundler
rvm: ruby-head
matrix:
  include:
    - rvm: ruby-3.0.0-preview1
      os: linux
      dist: xenial
    - rvm: ruby-3.0.0-preview1
      os: linux
      dist: groovy
      addons:
        apt:
          packages:
            - liburing-dev
    - rvm: ruby-3.0.0-preview1
      os: osx
    - rvm: ruby-head
  allow_failures:
    - rvm: ruby-head
  fast_finish: true

before_install: gem install bundler -v 2.1.4
script:
  - gem list -l
  - bundle exec rake compile
  - bundle exec rake

bundler_args: --jobs 1 --retry 3

notifications:
  email: false
